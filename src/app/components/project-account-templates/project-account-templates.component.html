<div style="display: flex; justify-content: space-between;">
  <h1 mat-dialog-title>Templates</h1>
  <mat-icon style="margin: 0 10px ;color: red;" (click)="close()">close</mat-icon>
</div>

<div style="display: flex; align-items: center; justify-content: space-between;">
  <mat-form-field style="width: 100%;">
    <mat-label>Search</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Search Templates" #input>
    <button mat-raised-button color="primary" matSuffix (click)="OnAdd($event)">Add Template</button>
  </mat-form-field>
</div>

<mat-dialog-content  class="card-container" style="height: 300px;">
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="loading-spinner-container">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
  </div>
  <div *ngIf="noTemplates" style="display: flex;align-items: center; justify-content: center; height: inherit;">
    <p><strong>Note: </strong>No Templates are there.</p>
  </div>
  <mat-card *ngIf="Add" class="card" >
    <mat-card-header>
      <mat-card-title #dialogContent>{{ selectedTemplate ? 'Edit Template' : 'Add Template' }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="templateForm" (ngSubmit)="onSubmit()">
        <mat-form-field style="width: 45%; margin-right: 10%;">
          <mat-label>Heading</mat-label>
          <input matInput formControlName="heading" placeholder="Heading of Template" required>
        </mat-form-field>
        <mat-form-field style="width: 45%;">
          <mat-label>Alias</mat-label>
          <input matInput formControlName="alias" placeholder="Alias">
        </mat-form-field>
        <mat-form-field style="width: 100%;">
          <mat-label>Template Content</mat-label>
          <textarea matInput rows="3" formControlName="templateString" required></textarea>
        </mat-form-field>
        <div style="display: flex; align-items: center;">
          <button *ngIf="!loading" mat-raised-button color="primary" type="submit" style="margin-right: 10px;">{{ selectedTemplate ? 'Update' : 'Add' }}</button>
          <loader [loading]="loading" [ngClass]="{'loader': loading}"></loader>
          <button mat-raised-button color="warn"(click)="onCancel()">Close</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
  <div class="templates-container" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
    <mat-card class="card" *ngFor="let t of templates" style="width: 96%;">
      <div class="icon">
        <mat-card-header>
          <mat-card-title>{{ t.heading }}</mat-card-title>
        </mat-card-header>
        <div style="display: flex;">
          <mat-icon (click)="editTemplate(t)">edit</mat-icon>
          <mat-icon (click)="deleteTemplate(t.id)" class="delete">delete</mat-icon>
        </div>
      </div>
      <mat-card-subtitle style="margin: 0px 16px;">
        <strong>Alias: </strong>{{ t.alias }}
      </mat-card-subtitle>
      <mat-card-content>
        <div [innerHTML]="t.templateString" class="customeText"></div>
      </mat-card-content>
    </mat-card>
  </div>
</mat-dialog-content>